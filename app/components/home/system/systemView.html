<div layout="column" layout-gt-md="row">
    <div flex ng-repeat="p in panelResult">
        <md-card  ng-class="(isNumber(p.info) || p.info =='BÌNH THƯỜNG' ) ? 'panel-blue' : 'panel-orange'">
            <md-card-title>
                <md-card-title-text>
                    <span class="md-headline">{{p.name}}</span>
                    <span class="md-headline" ng-if="isNumber(p.info)">{{p.info | number}}</span>
                    <span class="md-headline" ng-if="!isNumber(p.info)">{{p.info}}</span>
                </md-card-title-text>
            </md-card-title>
            <md-card-actions layout="row" layout-align="end center">
                <md-button ng-disabled="!p.href" ui-sref="{{p.href}}"><span ng-if="p.href">Chi tiết <i class="material-icons">more_horiz</i></span></md-button>
            </md-card-actions>
        </md-card>
    </div>
</div>

<div layout="column" layout-gt-md="row" layout-margin id="status" >
    <div flex layout="column" class="md-whiteframe-1dp">
        <md-toolbar>
                <div class="md-toolbar-tools">
                    Trạng thái máy chủ
                </div>
            </md-toolbar>
        <md-content>
            <div flex layout="row">
                <div flex><highchart id="chartRamPie" config="chartRamConfig"></highchart></div>
                <div flex><highchart id="chartCpuPie" config="chartCpuConfig"></highchart></div>
                <div flex><highchart id="chartStoragePie" config="chartStorageConfig"></highchart></div>
            </div>
            <div flex>
                <mdt-table paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,100]}"
                           mdt-row="{
                      data: processDetail,
                      'column-keys': [
                          'name',
                          'ram',
                          'cpu',
                          'status'
                        ]
                      }">
                    <mdt-header-row>
                        <mdt-column align-rule="left">Tiến trình</mdt-column>
                        <mdt-column align-rule="right">Ram Usage</mdt-column>
                        <mdt-column align-rule="right">CPU Usage</mdt-column>
                        <mdt-column align-rule="right">Trạng thái</mdt-column>
                    </mdt-header-row>

                    <!-- using mdt-custom-cell directive let us create a custom visualisation for the specified column key. -->
                    <mdt-custom-cell column-key="name">
                        <strong>{{value}}</strong>
                    </mdt-custom-cell>
                    <mdt-custom-cell column-key="ram">
                        {{value | number}} %
                    </mdt-custom-cell>
                    <mdt-custom-cell column-key="cpu">
                        {{value | number}} %
                    </mdt-custom-cell>
                    <mdt-custom-cell column-key="status">
                        <i class="fa fa-circle" ng-class="value?'icon-green':'icon-red'"></i>
                    </mdt-custom-cell>
                </mdt-table>
            </div>
        </md-content>
    </div>
    <div flex layout="column" class="md-whiteframe-1dp">
        <md-toolbar>
            <div class="md-toolbar-tools">
                Tiếp nhận Logs
            </div>
        </md-toolbar>
        <md-content>
            <div flex>
                <md-progress-linear ng-show="loadingChart" md-mode="indeterminate" class="md-accent"></md-progress-linear>
                <highchart id="chartLine" config="chartConfig"></highchart>
            </div>
        </md-content>
    </div>
</div>

<div layout="column" layout-gt-md="row" layout-margin >
    <div flex layout="column" class="md-whiteframe-1dp">
        <md-toolbar>
            <div class="md-toolbar-tools">
                Website
            </div>
        </md-toolbar>
        <md-content>
            <mdt-table paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,100]}",
                       mdt-row-paginator="getWebsites(page, pageSize)"
                       mdt-row-paginator-error-message="Xảy ra lỗi khi tải dữ liệu"
                       mdt-trigger-request="getLoadResultsCallback(loadPageCallback)"
                       mdt-row="{

                      'column-keys': [
                          'hostName',
                          'event',
                          'reason',
                          'duration'
                        ]
                      }">
                <mdt-header-row>
                    <mdt-column align-rule="left">Website</mdt-column>
                    <mdt-column align-rule="right">Trạng thái</mdt-column>
                    <mdt-column align-rule="right">Http Code</mdt-column>
                    <mdt-column align-rule="right">Uptimes</mdt-column>
                </mdt-header-row>
                <mdt-custom-cell column-key="hostName">
                    <strong>{{value}}</strong>
                </mdt-custom-cell>
                <mdt-custom-cell column-key="event">
                    <label class="label" ng-class="value == 'Down'?'label-danger':value == 'Up'?'label-success':'label-primary'">
                        <i class="fa"
                           ng-class="value == 'Down'?'fa-long-arrow-down':value == 'Up'?'fa-long-arrow-up':'fa-play'"></i>
                        {{value}}
                    </label>
                </mdt-custom-cell>
                <mdt-custom-cell column-key="reason">
                    <label class="label"
                           ng-class="value == 'OK' || value=='OK (200)'?'label-success':'label-danger'">
                        {{value}}
                    </label>
                </mdt-custom-cell>
            </mdt-table>

        </md-content>
    </div>
    <div flex layout="column" class="md-whiteframe-1dp">
        <md-toolbar>
            <div class="md-toolbar-tools">
                Cảm biến
            </div>
        </md-toolbar>
        <md-content>
            <md-progress-linear ng-show="loadingTableAgent" md-mode="indeterminate" class="md-accent"></md-progress-linear>
            <p class="noThing" ng-show="!loadingTableAgent && agents.length == 0"><em>Không có cảm biến</em></p>
            <mdt-table paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,100]}"
                       mdt-row="{
                      data: agents,
                      'column-keys': [
                          'name',
                          'lastTime',
                          'total',
                          'status'
                        ]
                      }"
                       ng-show="!loadingTableAgent && agents.length != 0">
                <mdt-header-row>
                    <mdt-column align-rule="left">Tên cảm biến</mdt-column>
                    <mdt-column align-rule="right">Lần cuối nhận Logs</mdt-column>
                    <mdt-column align-rule="right">Sự kiện</mdt-column>
                    <mdt-column align-rule="right">Trạng thái</mdt-column>
                </mdt-header-row>

                <!-- using mdt-custom-cell directive let us create a custom visualisation for the specified column key. -->
                <mdt-custom-cell column-key="name">
                    <strong>{{value}}</strong>
                </mdt-custom-cell>
                <mdt-custom-cell column-key="lastTime">
                    {{value | date:'yyyy-MM-dd HH:mm:ss'}}
                </mdt-custom-cell>
                <mdt-custom-cell column-key="total">
                    {{value | number}}
                </mdt-custom-cell>
                <mdt-custom-cell column-key="status">
                    <label class="label" ng-class="value == 'Down'?'label-danger':'label-success'">
                        <i class="fa"
                           ng-class="value == 'Down'?'fa-long-arrow-down':'fa-long-arrow-up'"></i>
                        {{value}}
                    </label>
                </mdt-custom-cell>
            </mdt-table>
        </md-content>
    </div>
</div>
